---
/**
 * MiniHero - Componente para páginas visuales (tours, festivities, places)
 * Un hero compacto con imagen de fondo pero sin texto extenso
 * Altura reducida para mostrar contenido rápidamente
 */

interface BreadcrumbItem {
  label: string;
  href?: string;
}

interface Props {
  title: string;
  subtitle?: string;
  image: string;
  imageAlt: string;
  breadcrumbs?: BreadcrumbItem[];
  overlay?: "light" | "medium" | "dark";
}

const {
  title,
  subtitle,
  image,
  imageAlt,
  breadcrumbs = [{ label: "Inicio", href: "/" }],
  overlay = "medium",
} = Astro.props;

const fullBreadcrumbs = [...breadcrumbs, { label: title }];

const overlayClasses = {
  light: "from-black/40 to-black/20",
  medium: "from-black/60 to-black/30",
  dark: "from-black/70 to-black/40",
};
---

<header class="relative h-48 md:h-64 lg:h-72 overflow-hidden">
  <!-- Background Image -->
  <div class="absolute inset-0">
    <img
      src={image}
      alt={imageAlt}
      class="w-full h-full object-cover object-center"
      loading="eager"
    />
  </div>

  <!-- Gradient Overlay -->
  <div class={`absolute inset-0 bg-gradient-to-t ${overlayClasses[overlay]}`}></div>

  <!-- Mesh accent (subtle) -->
  <div class="absolute inset-0 opacity-30 mix-blend-overlay">
    <div class="absolute bottom-0 left-0 w-1/2 h-1/2 bg-gradient-to-tr from-fucsia/20 to-transparent blur-2xl"></div>
    <div class="absolute top-0 right-0 w-1/3 h-1/3 bg-gradient-to-bl from-turquesa/15 to-transparent blur-xl"></div>
  </div>

  <!-- Content -->
  <div class="relative h-full flex flex-col justify-end z-10">
    <div class="container-custom pb-6 md:pb-8">
      <!-- Breadcrumbs -->
      <nav aria-label="Breadcrumb" class="mb-3">
        <ol class="flex flex-wrap items-center gap-2 text-sm" itemscope itemtype="https://schema.org/BreadcrumbList">
          {fullBreadcrumbs.map((crumb, index) => (
            <li
              class="flex items-center gap-2"
              itemprop="itemListElement"
              itemscope
              itemtype="https://schema.org/ListItem"
            >
              {index > 0 && (
                <svg class="w-3.5 h-3.5 text-white/60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              )}
              {crumb.href ? (
                <a
                  href={crumb.href}
                  class="text-white/80 hover:text-white transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent rounded"
                  itemprop="item"
                >
                  <span itemprop="name">{crumb.label}</span>
                </a>
              ) : (
                <span class="text-white font-semibold" itemprop="name" aria-current="page">
                  {crumb.label}
                </span>
              )}
              <meta itemprop="position" content={String(index + 1)} />
            </li>
          ))}
        </ol>
      </nav>

      <!-- Title -->
      <h1 class="text-2xl md:text-3xl lg:text-4xl font-heading font-bold text-white drop-shadow-lg">
        {title}
      </h1>

      {subtitle && (
        <p class="mt-2 text-base md:text-lg text-white/90 max-w-2xl drop-shadow">
          {subtitle}
        </p>
      )}
    </div>
  </div>
</header>
